digraph HastaneSistemi {
    rankdir=TB;
    node [shape=box, style=rounded];
    
    start [label="Başla", shape=ellipse, style=filled, fillcolor=lightgreen];
    kimlik [label="Kimlik Doğrulama\n(TC No + Şifre)"];
    dogrulama_kontrol [label="Kimlik Doğru?", shape=diamond];
    islem_secimi [label="İşlem Seçimi\n1-Randevu Al\n2-Tahlil Sonucu Gör", shape=diamond];
    
    // Randevu Modülü
    poliklinik [label="Poliklinik Seçimi"];
    doktor_listesi [label="Doktor Listesi\nGörüntüleme"];
    uygun_saatler [label="Uygun Saatleri\nGöster (Döngü)"];
    randevu_uygun [label="Uygun Randevu\nVar mı?", shape=diamond];
    saat_sec [label="Tarih ve Saat Seç"];
    randevu_onayla [label="Randevu Onaylama"];
    sms_randevu [label="SMS Gönder\n(Randevu Onayı)"];
    
    // Tahlil Modülü
    tahlil_sorgula [label="Tahlil Sonuçlarını\nSorgula"];
    tahlil_varmi [label="Sonuç Hazır mı?", shape=diamond];
    tahlil_goster [label="Tahlil Sonuçlarını\nGörüntüle"];
    tahlil_indir [label="PDF İndir/Yazdır"];
    
    end [label="Bitir", shape=ellipse, style=filled, fillcolor=lightcoral];
    hata_kimlik [label="Hata: Kimlik\nDoğrulanamadı", style=filled, fillcolor=lightyellow];
    hata_tahlil [label="Sonuç Henüz\nHazır Değil", style=filled, fillcolor=lightyellow];
    
    // Ana Akış
    start -> kimlik;
    kimlik -> dogrulama_kontrol;
    dogrulama_kontrol -> islem_secimi [label="Evet"];
    dogrulama_kontrol -> hata_kimlik [label="Hayır"];
    hata_kimlik -> kimlik [label="Tekrar Dene"];
    
    // Koşul: İşlem Seçimi
    islem_secimi -> poliklinik [label="1-Randevu Al"];
    islem_secimi -> tahlil_sorgula [label="2-Tahlil Sonucu"];
    
    // Randevu Akışı (Döngülü)
    poliklinik -> doktor_listesi;
    doktor_listesi -> uygun_saatler;
    uygun_saatler -> randevu_uygun;
    randevu_uygun -> saat_sec [label="Evet"];
    randevu_uygun -> poliklinik [label="Hayır\n(Başka Doktor Seç)", style=dashed];
    saat_sec -> randevu_onayla;
    randevu_onayla -> sms_randevu;
    sms_randevu -> end;
    
    // Tahlil Akışı
    tahlil_sorgula -> tahlil_varmi;
    tahlil_varmi -> tahlil_goster [label="Evet"];
    tahlil_varmi -> hata_tahlil [label="Hayır"];
    hata_tahlil -> end;
    tahlil_goster -> tahlil_indir;
    tahlil_indir -> end;
}

digraph TahlilModulu {
    rankdir=TB;
    node [shape=box, style=rounded];
    
    start [label="Başla", shape=ellipse, style=filled, fillcolor=lightgreen];
    kimlik [label="Kimlik Doğrulama\n(TC No)"];
    tahlil_sorgula [label="Tahlil Kayıtlarını\nSorgula"];
    
    // Koşul 1: Tahlil Var mı?
    tahlil_varmi [label="Tahlil Kaydı\nVar mı?", shape=diamond, style=filled, fillcolor=lightyellow];
    tahlil_yok_mesaj [label="Mesaj: Sistemde\nTahlil Kaydı Yok", style=filled, fillcolor=lightcoral];
    
    // Koşul 2: Sonuç Hazır mı?
    sonuc_hazir [label="Sonuç\nHazır mı?", shape=diamond, style=filled, fillcolor=lightyellow];
    bekleme_mesaji [label="Mesaj: Tahlil Sonucu\nHenüz Hazır Değil\nLütfen Bekleyiniz", style=filled, fillcolor=orange];
    
    // Sonuç Görüntüleme
    sonuc_goster [label="Tahlil Sonuçlarını\nEkranda Görüntüle", style=filled, fillcolor=lightblue];
    pdf_sor [label="PDF İndirmek\nİster misiniz?", shape=diamond, style=filled, fillcolor=lightyellow];
    pdf_indir [label="Sonuçları PDF\nOlarak İndir", style=filled, fillcolor=lightgreen];
    pdf_indirme_yok [label="Sadece Ekranda Görüntüle"];
    
    end [label="Bitir", shape=ellipse, style=filled, fillcolor=lightcoral];
    
    // Akış
    start -> kimlik;
    kimlik -> tahlil_sorgula;
    tahlil_sorgula -> tahlil_varmi;
    
    // Koşul 1: Tahlil Kontrolü
    tahlil_varmi -> sonuc_hazir [label="Evet"];
    tahlil_varmi -> tahlil_yok_mesaj [label="Hayır"];
    tahlil_yok_mesaj -> end;
    
    // Koşul 2: Sonuç Hazır mı Kontrolü
    sonuc_hazir -> sonuc_goster [label="Evet\n(Onaylandı)"];
    sonuc_hazir -> bekleme_mesaji [label="Hayır\n(İşlemde)"];
    bekleme_mesaji -> end;
    
    // Sonuç Görüntüleme ve PDF İndirme
    sonuc_goster -> pdf_sor;
    pdf_sor -> pdf_indir [label="Evet"];
    pdf_sor -> pdf_indirme_yok [label="Hayır"];
    pdf_indir -> end;
    pdf_indirme_yok -> end;
}
